<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SoznAi ‚Äî Admin</title>
    <link rel="stylesheet" href="/admin/static/styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js" defer></script>
    <script type="module" src="/admin/static/app.js" defer></script>
  </head>
  <body>
    <main class="layout">
      <header class="header">
        <h1>SoznAi ¬∑ –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h1>
        <p>–ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–∞—Å—Ö–æ–¥–æ–≤ –ò–ò –∏ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏</p>
      </header>

      <section class="card" id="auth-card">
        <h2>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>
        <p>–í–≤–µ–¥–∏—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π —Ç–æ–∫–µ–Ω (Bearer).</p>
        <div class="auth-form">
          <input type="password" id="admin-token" placeholder="ADMIN_TOKEN" autocomplete="off" />
          <button id="apply-token">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button id="clear-token" class="ghost">–û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>
        <p id="auth-status" class="muted"></p>
      </section>

      <section class="grid">
        <article class="card" id="overview-card">
          <h2>–û–±–∑–æ—Ä</h2>
          <div class="metrics" id="overview-metrics"></div>
        </article>

        <article class="card" id="controls-card">
          <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h2>
          <form id="limits-form" class="control-form">
            <label>
              Soft limit (USD)
              <input type="number" min="0" step="0.01" id="soft-limit" required />
            </label>
            <label>
              Hard limit (USD)
              <input type="number" min="0" step="0.01" id="hard-limit" required />
            </label>
            <button type="submit">–û–±–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç—ã</button>
          </form>

          <div class="control-form">
            <label>
              –†–µ–∂–∏–º –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
              <select id="mode-select">
                <option value="auto">auto</option>
                <option value="mini_only">mini_only</option>
                <option value="turbo_only">turbo_only</option>
                <option value="local_only">local_only</option>
              </select>
            </label>
            <button id="update-mode">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
          </div>

          <div class="control-form switch">
            <label>
              –ù–æ—á–Ω–æ–π –±–∞—Ç—á (insights)
              <input type="checkbox" id="batch-toggle" />
            </label>
          </div>

          <button id="stop-gpt" class="danger">üí° –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å GPT (local only)</button>
          <p id="control-status" class="muted"></p>
        </article>
      </section>

      <section class="card charts">
        <h2>–ì—Ä–∞—Ñ–∏–∫–∏</h2>
        <div class="chart-grid">
          <canvas id="cost-chart"></canvas>
          <canvas id="tokens-chart"></canvas>
          <canvas id="requests-chart"></canvas>
        </div>
      </section>

      <section class="card history">
        <h2>–ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤</h2>
        <table>
          <thead>
            <tr>
              <th>–í—Ä–µ–º—è</th>
              <th>–ú–æ–¥–µ–ª—å</th>
              <th>–ò—Å—Ç–æ—á–Ω–∏–∫</th>
              <th>–¢–∏–ø</th>
              <th>Tokens</th>
              <th>USD</th>
              <th>User</th>
            </tr>
          </thead>
          <tbody id="history-body"></tbody>
        </table>
      </section>
    </main>

    <div id="toast" class="toast hidden"></div>
  </body>
</html>
